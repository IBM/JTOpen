<HTML>
<HEAD>
<TITLE>JTOpen CHANGES</TITLE>
</HEAD>
<BODY>
<H2>IBM Toolbox for Java - JTOpen version</H2>
<PRE>
Copyright (C) 1997-2003 International Business Machines Corporation and
others. All rights reserved.

File: CHANGES
Last updated: December 19, 2003

The term "JTOpen" refers to the open source software product
"IBM Toolbox for Java" (formerly "AS/400 Toolbox for Java") plus any additional
enhancements provided by the open source community. JTOpen, which is governed
by the IBM Public License, as well as its Java source code, is contained in the
open source repository located off of:
<A HREF="http://oss.software.ibm.com/developerworks/opensource/jt400">http://oss.software.ibm.com/developerworks/opensource/jt400</A>.

The terms "Toolbox" and "Toolbox LPP" refer to the IBM Licensed Program
Product "IBM Toolbox for Java" (formerly "AS/400 Toolbox for Java") which is
supported by IBM and can be obtained from the IBM Toolbox for Java web site:
<A HREF="http://www.ibm.com/servers/eserver/iseries/toolbox">http://www.ibm.com/servers/eserver/iseries/toolbox</A>.
</PRE>

<HR>
<H3>Contents</H3>
<A HREF="#42">Fixes and enhancements in JTOpen 4.2</A><BR>
<A HREF="#41">Fixes and enhancements in JTOpen 4.1</A><BR>
<A HREF="#40">Fixes and enhancements in JTOpen 4.0</A>
<P>

<HR>
<H3><A NAME="#42">Fixes and enhancements in JTOpen 4.2</A></H3>
<PRE>
- Build: Created task to insert copyright strings into JTOpen-built class files.
- Build: Added copyright strings to binary class files in CVS.
- Build: Added an IdentityToken stub since we currently cannot ship EIM with JTOpen.
- Connection: Support EIM "identity tokens" for authentication.
- Connection: Added serialVersionUID to SocketProperties.
- Connection: Added AS400.setDDMRDB() method to set the IASP/RDB to use for record-level access (RLA).
- Connection: Added AS400.getSocketProperties().
- Connection pools: Fixed bug #3727 - Don't synchronize the entire pool in order to get one connection out.
- Connection pools: Added socket properties.
- Connection pools: Allow null password.
- Connection pools: Set thread name on maintenance thread.
- Connection pools: Don't start maintenance thread if threadUsed is false.
- Data conversion: Added another variant of CharConverter.byteArrayToString() and stringToByteArray().
- Data conversion: Enhanced bidi algorithms.
- Data conversion: Directly support CCSID 1208 (UTF-8).
- Data queue: Updates to allow user to write to a data queue without having read authority.
- HTML: Properly allow multiple options to be selected in a SelectFormElement.
- IFS: Fixed list attribute calls on files larger than 2GB.
- IFS: Changed VRM check.
- JDBC: Added a JDBC trace category; log to the Toolbox trace, log stream, and log writer separately.
- JDBC: Changed major driver version to 6.0.
- JDBC: Allow read-only sensitive cursors.
- JDBC: Changed exception text for data type mismatches on date, time, and timestamp types.
- JDBC: Support scrollable stored procedure result sets when the server does.
- JDBC: Get the long table names when calling getExportedKeys().
- JDBC: Support new auto-commit and commit levels provided by server.
- JDBC: Updated cursor sensitivity handling; use asensitive cursors as default for ResultSet.TYPE_SCROLL_SENSITIVE.
- JDBC: Added NTS support.
- JDBC: Use underlying column name when updating a row that has a column with an alias.
- JDBC: Minor performance improvements in statement batching.
- Job: Do not allow ELAPSED statistics constants to be retrievable attributes on JobList.
- NetServer: Deprecated NetServer* classes; replaced with new ISeriesNetServer* classes.
- NetServer: Added KERBEROS_OR_PASSWORDS authentication method constant.
- Open list: Added IPP attribute, job system name filter, and date filter to SpooledFileOpenList.
- Open list: Change STATUS_PRINTING constant for SpooledFileOpenList to match what the API expects (*PRINTER).
- Open list: Fixed null job system name on items in SpooledFileOpenList.
- Open list: Status filter on SpooledFileOpenList should have been a String array.
- PCML: Updated class loading scheme so PCML files can be found under Websphere and Eclipse.
- Permission: Updated the way object names and CL command strings are treated to handle NLS issues.
- Permission: Changed thread-safe settings on underlying CL commands so that they will work natively.
- Permission: Added setPrimaryGroup().
- Permission: Support Unicode object path names when the server does.
- Print: Added PrintObject.getSingleAttribute() methods.
- Product: Fixed user space error when calling getPTFs() natively.
- Program call: Fixed no program object with no message option.
- Proxy: Fixed ArrayIndexOutOfBoundsException in ProgramCall.
- PTF: Return message help of "None" for a status of NOT_LOADED.
- PTF: Fixed isPreReq() and isCoReq().
- Resource: Deprecated this package in favor of function in the access package.
- RLA: Updated record format field names to match output from DSPFFD.
- User: Added exists().
- User space: Updated to create with optimum alignment.
- Utilities: Added comment that specifies column widths for CommandHelpRetriever.
- Vaccess: Fix for checkboxes in AS400JDBCDataSourcePaneGUI under JDK 1.4.
</PRE>

<HR>
<H3><A NAME="#41">Fixes and enhancements in JTOpen 4.1</A></H3>
<PRE>
- Build: Include build directory in src.zip.
- Build: Added xpcml.xsd to jt400.jar and jt400Native.jar
- Build: Added com.ibm.as400.access.list package.
- Build: Use old StringBuffer.append() method in RJobLog and HTMLDocument for compatibility with JDK 1.3.
- Comm trace: Added reverse.
- Connection: Open sourced AS400ImplRemote.
- Connection: Support extra GSS/Kerberos option of authentication for portlet environment.
- Connection: Catch socket properties exceptions when tracing is active.
- Connection pools: Moved inner classes to their own external definitions, to avoid possible JIT errors.
- Connection pools: Check for null in AS400JDBCConnectionPool.setDataSource().
- Connection pools: Ensure AS400 object is connected when it is retrieved from the pool.
- Data areas: Cleaned up implementation of subclass delete() methods.
- Data conversion: Added NLV mapping for zh_CN.
- Data conversion: Added getInstanceType() methods to AS400DataType classes for performance.
- Data conversion: Added CCSID 17584 (subset of 1200).
- Data conversion: Removed _en and _en_US resource bundles, they were a performance hit and are not needed.
- Data conversion: Added localeToNLV() methods on NLS class.
- Data conversion: Fixed AS400Text.toBytes() for CCSIDs 13488 and 61952.
- Data conversion: Made BinaryConverter.bytesToString() and stringToBytes() public.
- Directory entries: Default to USER_PROFILE, "*" when no selection IDs are added.
- Environment variables: Fixed problems with service program call.
- FTP: Use APPE instead of APPEND to work with non-OS/400 FTP servers.
- HTML: Throw exception if listener is null on form and table converters.
- IFS: Added copyTo() functionality.
- IFS: Added isSymbolicLink().
- Javadoc: Added doc-files subdirectories and updated references in all source parts.
- Javadoc: Added CCSID list and component list documentation, linked to from utilities.AS400ToolboxJarMaker.
- Javadoc: Minor updates to micro JDBC driver.
- Javadoc: Added example to JobList.addJobSelectionCriteria().
- Javadoc: Minor fixes to FTP classes.
- JDBC: Minor description string updates to AS400JDBCDataSourcePaneGUI.
- JDBC: Post data truncation warning when the database has a mapping error.
- JDBC: Perform case insensitive search for parameter indices to match the JDBC spec.
- JDBC: Pad with correct space character in CLOBs.
- JDBC: Fixed string index in CLOBs when locators are used.
- JDBC: Added loginTimeout and serverTraceCategories properties to data source.
- JDBC: Fixed translateHex property in data source.
- JDBC: Added materialized query table support.
- JDBC: Added static cursor support.
- JDBC: Throw data type mismatch when length on setBinaryStream() is greater than the stream length, except on locators.
- JDBC: Throw data truncation when length on setBinaryStream() is greater than the column size.
- JDBC: ResultSetMetaData.getTableName() now calls getBaseTableName().
- JDBC: Changed how cursor sensitivity is used.
- JDBC: Changed how output parameters are registered and retrieved.
- JDBC: Fixed proxy support for BLOBs and CLOBs.
- JDBC: Alias VARBIN and BINARY VARYING to VARBINARY.
- JDBC: Changed radix from decimal (10) to binary (2) on double, float, and real columns.
- JDBC: Support setting a URL for char and graphic columns.
- JDBC: Changed setBytes() to expect byte[].class instead of Byte.class.
- JDBC: Added proxy support for ParameterMetaData.
- JDBC: Set table name from first SELECT FROM TABLE only, in the case of a subquery.
- JDBC: Changes to how the default schema is added to the library list.
- Jobs: Return empty array when JobList length is 0.
- Messages: Added option to get the user who sent the message as well as the initial user of the job. 
- Messages: Fixed MessageFile.replaceText() to use the correct indices.
- Messages: Support more than 10 messages returned from a remote command or API call.
- NetServer: Added new ISeriesNetServer classes to replace the ones that relied on PCML/Resource framework.
- Object: Only call API on-thread if Toolbox property is set.
- Object: Added ObjectDescription.exists().
- Open list: Added new package com.ibm.as400.access.list.
- Open list: Added SpooledFileOpenList classes to use in place of regular SpooledFile classes for performance.
- PCML: Added support to PCML for XPCML, using XML schemas.
- PCML: Updated xsl and xsd definitions.
- PCML: Removed dependency on XML parser when using serialized PCML.
- PCML: Handle extendable elements in XPCML.
- PCML: Handle non-qualified transform file name.
- PCML: Support PCML/XPCML documents via an InputStream.
- Print: Added ISeriesPrinter class to use remote command server instead of network print server for performance.
- Print: Added more print attributes to print classes such as AFPResource and SpooledFile.
- PTF: Added getRelationship(), fixed pre-req and co-req methods.
- User: Added more constants.
- Utilities: Added AboutToolbox class to utilities package, to determine which version of jt400.jar is used.
- Utilities: Handle old and new tags in gencmddoc.
</PRE>

<HR>
<H3><A NAME="#40">Fixes and enhancements in JTOpen 4.0</A></H3>
<PRE>
- Build: Compile with JDK 1.4 to eliminate dependencies, target JDK 1.1.
- Build: Updated manifest files with new JTOpen version number.
- Build: Removed PDML task; separated native optimization classes.
- Build: Added class files to repository to avoid SSLight as a build requirement.
- Build: Require JDK 1.4.1 to avoid javadoc and ToolboxME errors.
- Build: Changed SQLData classes to use a getter instead of overridden static to avoid Jikes issues.
- Build: Various javadoc fixes to pacify JDK 1.4.1 javadoc tool.
- Build: Removed calls to StringBuffer.append(StringBuffer) to avoid Sun compatibility issue across JDK levels.
- Command: Add product library to library list before refreshing panel group information.
- Command: Separated getXMLXXX() methods so as not to rely on system command information.
- Command call: Deprecated getJob() in favor of getServerJob().
- Connection pools: Changed ConnectionListEvent.getSource() to always return an AS400 object.
- Connection pools: Added synchronization; throw exception if PooledConnection is in use.
- Data conversion: CCSID 1200 is now UTF-16; CCSID 1202 is now little endian UCS-2.
- Data conversion: Fixed ArrayIndexOutOfBoundsException in ConvTableReader.
- Data conversion: Bidi strings are now padded before conversion algorithm is applied, instead of after.
- Data conversion: Changed packed and zoned decimals to have 63-digit maximum instead of 31.
- Directory entry: Fixed getMailServiceLevel().
- HTML: Support XSL-FO tags.
- HTML: Added FileListElement.list(HTMLTableConverter) method.
- Javadoc: Removed reference to AS400snameFormatter from CharConverter class.
- Javadoc: Fixed PTF.getIPLRequired().
- Javadoc: Fixed AS400ToolboxJarMaker link to Job class.
- Javadoc: Updated SpooledFile.
- Javadoc: Added javadoc regarding QTEMP.LIB to IFSFile.
- Javadoc: Corrected javadoc for DirectoryEntry.getCountry().
- Javadoc: Generate javadoc for com.ibm.as400.util.commtrace package.
- Javadoc: Handle com.ibm.as400.security.auth package.
- Javadoc: Fixed example in DirectoryEntryList.
- JDBC: Update counts now return SUCCESS_NO_INFO on a blocked insert.
- JDBC: Support ROWID column type.
- JDBC: Performance improvement to SQLData types - use integer type instead of instanceof.
- JDBC: Adjusted minimum divide scale property.
- JDBC: Binary types now support Strings of hexadecimal characters.
- JDBC: Workaround for JIT bug in JDk 1.3 while parsing SQL statements.
- JDBC: Changed to report correct maximum precision for various data types according to SQL Reference.
- JDBC: Changed Blob and Clob datastreams to use new host server truncation codepoint for writing.
- JDBC: Changed behavior of mixed case column names to ignore case unless surrounded by quotes.
- JDBC: Fixed NullPointerException in ResultSet.getBytes().
- JDBC: Changed DatabaseMetaData.supportsResultSetType() to return TYPE_SCROLL_INSENSITIVE.
- JDBC: Fixed data truncation bugs and warnings.
- JDBC: Removed limitation of 32K statements in batch.
- JDBC: Added AS400JDBCConnectionHandle.getServerJobIdentifier().
- JDBC: Trace LOB locator handles.
- JDBC: Support retrieving base table name for each column.
- JDBC: Allow length on setXXX(InputStream) methods to differ from actual amount of data in InputStream.
- JDBC: Added QAQQINI library name property.
- JDBC: Handle statements with missing closing parenthetical mark.
- JDBC: Additional tracing for server attributes.
- JDBC: Do extra validation of decimal position and scale properties.
- JDBC: Support 63-digit decimal precision; use UTF-16 for default client encoding.
- JDBC: Fixed typecast and max/min value bugs in SQLBigint.
- JDBC: Support unencoded passwords in a data source Reference object.
- JDBC: PreparedStatement now remains useable after a batch execute.
- JDBC: Trace property no longer turns off Toolbox trace when set to its default.
- JDBC: Handle scientific notation numbers that have no decimal point.
- JDBC: Properly calculate stream length for Unicode Readers.
- JDBC: Trace object ID in SQLExceptions.
- JDBC: Fixes for erroneous commas in SQL statements.
- JDBC: Many fixes for LOB support.
- JDBC: Work around Brazil time zone issue.
- JDBC: Issue warning when 1000 open statements are reached per connection.
- JDBC: AS400JDBCDataSource can now be constructed with an AS400 object.
- JDBC: Ensure LOB classes do not break JDBC 1.0 clients.
- JDBC: Literal prefix for binary strings changed to "X'" instead of "'".
- JDBC: Fixed DatabaseMetaData.supportsTransactionIsolationLevel().
- JDBC: Use 819 (ISO) instead of 13488 (UCS-2) in toAsciiStream().
- JDBC: LOB locators now write to the server when necessary.
- JDBC: Correctly handle LOB locators when executing batch statements.
- JDBC: Added "toolbox trace" property.
- JDBC: Fixed issues with running to a Toolbox ProxyServer.
- JDBC: Added properties for package CCSID, min divide scale, max precision, and max scale.
- JDBC: Avoid rounding errors when parsing big integers.
- JDBC: Issue data truncation warning on a read.
- Job log: Added writeMessage(boolean onThread).
- Messages: Updated tracing; avoid NullPointerException in AS400Message.getPath().
- Panel group: Changed help identifier constructor to not throw an exception if library/object name is blank.
- Panel group: Mark QUHRHLPT API as threadsafe.
- PCML: (Bug #3538) Use context class loader to avoid issues in Websphere.
- PCML: Serializing a PCML file now uses a BufferedOutputStream.
- Print: Extra message information added.
- Program call: Deprecated getJob() in favor of getServerJob().
- QSYS object types: Support TIMZON and PDFMAP.
- Security: Refreshed codebase from Toolbox LPP; open sourced.
- Security: Changes to authentication token generation.
- Servlet: Support XSL-FO tags.
- System values: Support QTHDRSCAFN and QTHDRSCADJ.
- User: Updated javadoc and synchronization in UserList.
- User space: Added constants; allow *USER.
- Utilities: Support specifying alternate panel group to retrieve help text in CommandHelpRetriever.
- Utilities: CommandHelpRetriever now generates UIM template source.
- Utilities: Changed space character generation in CommandHelpRetriever.
- Utilities: Gracefully handle CPF6250 messages in CommandHelpRetriever.
- Utilities: Fixed unnecessary dependencies on the JDBC classes by the AS400 object in JarMaker.
- Utilities: Made CommandHelpRetriever's output directory non-static.
</PRE>
<HR>
</BODY>
</HTML>
